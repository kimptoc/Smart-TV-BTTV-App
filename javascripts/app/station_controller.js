((function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};bttv.StationController=function(){function b(){this.keyDownHandler=a(this.keyDownHandler,this),this.keyUpHandler=a(this.keyUpHandler,this),this.keyBackHandler=a(this.keyBackHandler,this),this.keySelectHandler=a(this.keySelectHandler,this)}return b.prototype.highlightChannel=function(a){return $("#"+bttv.get_buid(a+1)+" img").addClass("channel_logo_selected"),$("#"+bttv.get_buid(a+1)+" img").removeClass("channel_logo_notselected")},b.prototype.unhighlightChannel=function(a){return $("#"+bttv.get_buid(a+1)+" img").removeClass("channel_logo_selected"),$("#"+bttv.get_buid(a+1)+" img").addClass("channel_logo_notselected")},b.prototype.handleChannelClicked=function(){var a;return a=bttv.station.channels.get(bttv.station.get("selected_channel")),$("#loading-message").html(Serenade.render("channel",a,bttv.station_controller)),Server.url=""+bttv.station.get("content_url_root")+"/feed.php?name="+a.get("rss_feed_name"),Main.onLoad()},b.prototype.handleShowStations=function(){var a;return Main.onUnload(),$("#loading-message").html(Serenade.render("allinone",bttv.station,bttv.station_controller)),a=bttv.station.get("selected_channel"),this.highlightChannel(a),this.registerKeys()},b.prototype.keyHandler=function(){return bttv.log("station key handler")},b.prototype.registerKeys=function(){return bttv.log("registering key handlers"),KeyboardJS.unbind.key("all"),KeyboardJS.bind.key("up",this.keyUpHandler),KeyboardJS.bind.key("left",this.keyUpHandler),KeyboardJS.bind.key("down",this.keyDownHandler),KeyboardJS.bind.key("right",this.keyDownHandler),KeyboardJS.bind.key("enter",this.keySelectHandler)},b.prototype.keySelectHandler=function(){return bttv.log("select channel "+bttv.station.get("selected_channel")),this.handleChannelClicked()},b.prototype.keyBackHandler=function(){return this.handleShowStations()},b.prototype.keyUpHandler=function(){var a,b;bttv.log("station key up handler"),a=bttv.station.get("selected_channel"),b=-1+a;if(b>=0)return this.unhighlightChannel(a),bttv.station.set("selected_channel",b),this.highlightChannel(b)},b.prototype.keyDownHandler=function(){var a,b;bttv.log("station key down handler"),a=bttv.station.get("selected_channel"),b=1+a;if(b<bttv.station.channels.length)return this.unhighlightChannel(a),bttv.station.set("selected_channel",b),this.highlightChannel(b)},b}()})).call(this)